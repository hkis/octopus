<!doctype html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link title="style" media="screen" href="css/default.css" type="text/css" rel="stylesheet" />
<script type="text/javascript" src="js/jquery.1.4.4.min.js"></script>
<script type="text/javascript" src="js/uploadImg.js"></script>
<script type="text/javascript">
var ImageUpload = new ImageUpLoad('png jpg jpeg',0.9);
var imgData = '';
$(document).ready(function(){
    $('#imgFile').change(function(e){
        $('#path').val($('#imgFile')[0].value);
        if($('#imgFile')[0].value){
            if(ImageUpload.init($('#imgFile')[0].value)){
                $('#img_form').submit();
                $('#loading').fadeIn(1);
            }else{
                alert('允许上传的图片格式为jpg，jpeg，png');
            }
        }
    });
})
//这个函数是C#来调用的
function loadFun(){
    ImageUpLoad.prototype.imageControl('#preview',imgData);
    $('#loading').fadeOut(1);
}
</script>
<title>图片上传</title>
</head>

<body>
<iframe name="ifr" id="iframe_hidden"></iframe>
<div id="parent">
    <form id="img_form" name="imgForm" enctype="multipart/form-data" action="upload.php" target="ifr" method="post" >
        <input type="hidden" name="uid" value="binggege" />
        <input type="hidden" name="path" id="path" />
        <input type="hidden" name="action" value="upload" />
        <label id="action">请上传格式为jpeg，jpg或png的图片：</label>
        <input type="file" name="filedata" id="imgFile" />
    </form>
    <div id="preview"></div>
    <span id="loading">图片上传中</span>
    <input type="button" value="提交" id="submit" />
</div>
</body>
</html>